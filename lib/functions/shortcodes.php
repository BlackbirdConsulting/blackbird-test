<?php/** * Custom Shortcodes * * This file contains any custom shortcodes  * * @package      Core_Functionality * @since        1.0.0 * @link         https://github.com/billerickson/Core-Functionality * @author       Jason Chafin <Jason@blackbirdconsult.com> * @copyright    Copyright (c) 2012, Jason Chafin * @license      http://opensource.org/licenses/gpl-2.0.php GNU Public License */   //Jason's Test Functionsfunction say_hello() {$dickhead = Dickhead;return $dickhead;}add_shortcode('say-hello', 'say_hello');/*Display Taxonomy "Cost"*/function bb_get_tax_cost() {	global $post;	$tax_and_terms = '';	$tax_and_terms .= get_the_term_list( $post->ID, 'cost', 'Cost: ', ', ', '' ) ;	return $tax_and_terms;}add_shortcode('cost', 'bb_get_tax_cost');/*Display Taxonomy "Project Type"*/function bb_get_tax_type() {	global $post;	$tax_and_terms = '';	$tax_and_terms .= get_the_term_list( $post->ID, 'project_type', '<span class="button-meta">', '</span><span class="button-meta">', '</span>' ) ;	return $tax_and_terms;}add_shortcode('type', 'bb_get_tax_type');/*Display Taxonomy "Project Type on Project Single"*/function bb_get_tax_type2() {    global $post;    $tax_and_terms = '';    $tax_and_terms .= get_the_term_list( $post->ID, 'project_type', '<div id="single-meta"><ul class="single-meta"><li class="button-meta"><a href="/project/"><-- All Projects</a></li><li class="button-meta">', '</li><li class="button-meta">', '</li></ul></div>' ) ;    return $tax_and_terms;}add_shortcode('type2', 'bb_get_tax_type2');/* * Services Grid on Home Page *//** Services Grid */function bb_services_grid_shortcode() {    //Page ID variables    $webdev = 9;    $graphicdez = 15;    $socmedia = 13;    $seosem = 11;    $webhost = 444;    $webmaint = 741;    //$content = get_the_content();        //$field = get_field($field_name, $post_id, $format_value);    //echo $content;    echo '<div class="services-grid">';    echo '<span class="home-services-head"><h2>Our Services</h2></span>'    ;    echo '<a name="bb-services"></a>';    //Web Development        echo '<div class="services-cell">';    echo '<div class="services-wrap">';    echo '<i class="fa fa-wordpress fa-5x"></i>';    echo '<h3><span class="icon"></span>'.get_the_title($webdev).'</h3>';    echo get_field('service_blurb', $webdev,'');    echo '<p class=""><span class="button-services"><a href="'. get_permalink( $webdev ).'">Learn More</a></span></p>';    echo '</div>';    echo '</div>';            //Graphic Design     echo '<div class="services-cell">';    echo '<div class="services-wrap">';    echo '<i class="fa fa-desktop fa-5x"></i>';    echo '<h3><span class="icon"></span>'.get_the_title($graphicdez).'</h3>';    echo get_field('service_blurb', $graphicdez,'');    echo '<p class=""><span class="button-services"><a href="'. get_permalink( $graphicdez ).'">Learn More</a></span></p>';    echo '</div>';    echo '</div>';        //Social     echo '<div class="services-cell">';    echo '<div class="services-wrap">';    echo '<i class="fa fa-at fa-5x"></i>';    echo '<h3><span class="icon"></span>'.get_the_title($socmedia).'</h3>';    echo get_field('service_blurb', $socmedia,'');    echo '<p class=""><span class="button-services"><a href="'. get_permalink( $socmedia ).'">Learn More</a></span></p>';    echo '</div>';    echo '</div>';        //SEO     echo '<div class="services-cell">';    echo '<div class="services-wrap">';    echo '<i class="fa fa-keyboard-o fa-5x"></i>';    echo '<h3><span class="icon"></span>'.get_the_title($seosem).'</h3>';    echo get_field('service_blurb', $seosem,'');    echo '<p class=""><span class="button-services"><a href="'. get_permalink( $seosem ).'">Learn More</a></span></p>';    echo '</div>';    echo '</div>';        //Web Hosting     echo '<div class="services-cell">';    echo '<div class="services-wrap">';    echo '<i class="fa fa-server fa-5x"></i>';    echo '<h3><span class="icon"></span>'.get_the_title($webhost).'</h3>';    echo get_field('service_blurb', $webhost,'');    echo '<p class=""><span class="button-services"><a href="'. get_permalink( $webhost ).'">Learn More</a></span></p>';    echo '</div>';    echo '</div>';        //Site Maintenance     echo '<div class="services-cell">';    echo '<div class="services-wrap">';    echo '<i class="fa fa-medkit fa-5x"></i>';    echo '<h3><span class="icon"></span>'.get_the_title($webmaint).'</h3>';    echo get_field('service_blurb', $webmaint,'');    echo '<p class=""><span class="button-services"><a href="'. get_permalink( $webmaint ).'">Learn More</a></span></p>';    echo '</div>';    echo '</div>';        echo '</div>'; //End Services Grid    }add_shortcode('services-grid', 'bb_services_grid_shortcode');/*Pricing Menu Shortcodes  *  * Website Care and Maintenance *  */function bb_maintenance_menu() {    //Set up variables    $webcareid = 741; //ID of Website Care and Maint Page    //URL of Product Page    $mainturl = get_field('maintenance_url', $webcareid,'');    //Basic Plan    $basicname = get_field('least_maintenance_name', $webcareid,'');    $basicdesc = get_field('least_maintenance_description', $webcareid,'');    $basiccost = get_field('least_maintenance_monthly_cost', $webcareid,'');    $basicbenes = get_field('least_maintenance_benefits', $webcareid,'');    //Advanced Plan    $advancedname = get_field('middle_maintenance_name', $webcareid,'');    $advanceddesc = get_field('middle_maintenance_description', $webcareid,'');    $advancedcost = get_field('middle_maintenance_monthly_cost', $webcareid,'');    $advancedbenes = get_field('middle_maintenance_benefits', $webcareid,'');    //Developer's License Plan    $developername = get_field('most_maintenance_name', $webcareid,'');    $developerdesc = get_field('most_maintenance_description', $webcareid,'');    $developercost = get_field('most_maintenance_monthly_cost', $webcareid,'');    $developerbenes = get_field('most_maintenance_benefits', $webcareid,'');            $maintpricing = '<div class="pricing-row"><div class="pricing-span"><div class="pricing-col swatch-normal"><h2 class="pricing-head">'.$basicname.'</h2><h4 class="pricing-price"><small>$</small>'.$basiccost.'<span>month</span></h4><p class="pricing-description">'.$basicdesc.'</p>'.$basicbenes.'<span class="button-services"><a href="'.$mainturl.'">Sign Up</a></span></div></div><div class="pricing-span"><div class="pricing-col swatch-featured pricing-featured"><h2 class="pricing-head">'.$advancedname.'</h2><h4 class="pricing-price"><small>$</small>'.$advancedcost.'<span>month</span></h4><p class="pricing-description">'.$advanceddesc.'</p>'.$advancedbenes.'<span class="button-services"><a href="'.$mainturl.'">Sign Up</a></span></div></div><div class="pricing-span"><div class="pricing-col swatch-normal"><h2 class="pricing-head">'.$developername.'</h2><h4 class="pricing-price"><small>$</small>'.$developercost.'<span>month</span></h4><p class="pricing-description">'.$developerdesc.'</p>'.$developerbenes.'<span class="button-services"><a href="'.$mainturl.'">Sign Up</a></span></div></div></div><div class="clear"></div>';    return $maintpricing;}add_shortcode('maintenance-menu', 'bb_maintenance_menu');/*Pricing Menu Shortcodes  *  * Web Hosting *  */function bb_hosting_menu() {    //Set up variables    $hostid = 444; //ID of Website Care and Maint Page    //Bronze Plan    $bronzename = get_field('bronze_host_plan_name', $hostid,'');    $bronzeurl = get_field('bronze_host_plan_url', $hostid,'');    $bronzecost = get_field('bronze_host_plan_cost', $hostid,'');    $bronzebenes = get_field('bronze_host_plan_benefits', $hostid,'');    //Silver Plan    $silvername = get_field('silver_host_plan_name', $hostid,'');    $silverurl = get_field('silver_host_plan_url', $hostid,'');    $silvercost = get_field('silver_host_plan_cost', $hostid,'');    $silverbenes = get_field('silver_host_plan_benefits', $hostid,'');    //Gold Plan    $goldname = get_field('gold_host_plan_name', $hostid,'');    $goldurl = get_field('gold_host_plan_url', $hostid,'');    $goldcost = get_field('gold_host_plan_cost', $hostid,'');    $goldbenes = get_field('gold_host_plan_benefits', $hostid,'');            $hostpricing = '<div class="pricing-row"><div class="pricing-span"><div class="pricing-col swatch-normal"><h2 class="pricing-head">'.$bronzename.'</h2><p class="pricing-description">As little as</p><h4 class="pricing-price"><small>$</small>'.$bronzecost.'<span>month</span></h4>'.$bronzebenes.'<span class="button-services"><a href="'.$bronzeurl.'">Sign Up</a></span></div></div><div class="pricing-span"><div class="pricing-col swatch-featured pricing-featured"><h2 class="pricing-head">'.$silvername.'</h2><p class="pricing-description">As little as</p><h4 class="pricing-price"><small>$</small>'.$silvercost.'<span>month</span></h4>'.$silverbenes.'<span class="button-services"><a href="'.$silverurl.'">Sign Up</a></span></div></div><div class="pricing-span"><div class="pricing-col swatch-normal"><h2 class="pricing-head">'.$goldname.'</h2><p class="pricing-description">As little as</p><h4 class="pricing-price"><small>$</small>'.$goldcost.'<span>month</span></h4>'.$goldbenes.'<span class="button-services"><a href="'.$goldurl.'">Sign Up</a></span></div></div></div>';    return $hostpricing;}add_shortcode('hosting-menu', 'bb_hosting_menu');/* * BASIC WORDPRESS SITE FEATURES */function bb_basic_wordpress_features() {    //Set up variables    $hostid = 9; //ID of WordPress Website Development Page    //Web Design    $webdesigntitle = get_field('web_design_title', $hostid,'');    $webdesigndesc = get_field('web_design_description', $hostid,'');    $webdesignbenes = get_field('web_design_benefits', $hostid,'');    $webdesignvalue = get_field('web_design_value', $hostid,'');    //Web Development    $webdevelopmenttitle = get_field('web_development_title', $hostid,'');    $webdevelopmentdesc = get_field('web_development_description', $hostid,'');    $webdevelopmentbenes = get_field('web_development_benefits', $hostid,'');    $webdevelopmentvalue = get_field('web_development_value', $hostid,'');    //SEO/Copywriting    $copywritingtitle = get_field('copywriting_title', $hostid,'');    $copywritingdesc = get_field('copywriting_description', $hostid,'');    $copywritingbenes = get_field('copywriting_benefits', $hostid,'');    $copywritingvalue = get_field('copywriting_value', $hostid,'');        $basicwordpress = '<div class="pricing-row"><div class="pricing-span"><div class="pricing-col swatch-normal"><h2 class="pricing-head">'.$webdesigntitle.'</h2><p class="pricing-description">'.$webdesigndesc.'</p>'.$webdesignbenes.'<h4 class="pricing-price"><small>$</small>'.$webdesignvalue.'<span>value</span></h4></div></div><div class="pricing-span"><div class="pricing-col swatch-featured pricing-featured"><h2 class="pricing-head">'.$webdevelopmenttitle.'</h2><p class="pricing-description">'.$webdevelopmentdesc.'</p>'.$webdevelopmentbenes.'<h4 class="pricing-price"><small>$</small>'.$webdevelopmentvalue.'<span>value</span></h4></div></div><div class="pricing-span"><div class="pricing-col swatch-normal"><h2 class="pricing-head">'.$copywritingtitle.'</h2><p class="pricing-description">'.$copywritingdesc.'</p>'.$copywritingbenes.'<h4 class="pricing-price"><small>$</small>'.$copywritingvalue.'<span>value</span></h4></div></div></div>'; //end pricing row        return $basicwordpress;}add_shortcode('blackbird-basic-wordpress', 'bb_basic_wordpress_features');/* * BASIC WORDPRESS SITE FEATURES COPY */function bb_basic_wordpress_features2() {    //Set up variables    $hostid = 9; //ID of WordPress Website Development Page    //Web Design    $webdesigntitle = get_field('web_design_title', $hostid,'');    $webdesigndesc = get_field('web_design_description', $hostid,'');    $webdesignbenes = get_field('web_design_benefits', $hostid,'');    $webdesignvalue = get_field('web_design_value', $hostid,'');    //Web Development    $webdevelopmenttitle = get_field('web_development_title', $hostid,'');    $webdevelopmentdesc = get_field('web_development_description', $hostid,'');    $webdevelopmentbenes = get_field('web_development_benefits', $hostid,'');    $webdevelopmentvalue = get_field('web_development_value', $hostid,'');    //SEO/Copywriting    $copywritingtitle = get_field('copywriting_title', $hostid,'');    $copywritingdesc = get_field('copywriting_description', $hostid,'');    $copywritingbenes = get_field('copywriting_benefits', $hostid,'');    $copywritingvalue = get_field('copywriting_value', $hostid,'');            echo '<div class="pricing-row">';    //Cell One    echo '<div class="pricing-span">';//pricing span begin    echo '<div class="pricing-col swatch-normal">';    echo '<h2 class="pricing-head">'.$webdesigntitle.'</h2>';    echo '<p class="pricing-description">'.$webdesigndesc.'</p>';    echo $webdesignbenes;    echo '<h4 class="pricing-price"><small>$</small>'.$webdesignvalue.'<span>value</span></h4>';    echo '</div>';    echo '</div>';//end pricing span    //Cell Two    echo '<div class="pricing-span">';//pricing span begin    echo '<div class="pricing-col swatch-featured pricing-featured">';    echo '<h2 class="pricing-head">'.$webdevelopmenttitle.'</h2>';    echo '<p class="pricing-description">'.$webdevelopmentdesc.'</p>';    echo $webdevelopmentbenes;    echo '<h4 class="pricing-price"><small>$</small>'.$webdevelopmentvalue.'<span>value</span></h4>';    echo '</div>';    echo '</div>';//end pricing span    //Cell Three    echo '<div class="pricing-span">';//pricing span begin    echo '<div class="pricing-col swatch-normal">';    echo '<h2 class="pricing-head">'.$copywritingtitle.'</h2>';    echo '<p class="pricing-description">'.$copywritingdesc.'</p>';    echo $copywritingbenes;    echo '<h4 class="pricing-price"><small>$</small>'.$copywritingvalue.'<span>value</span></h4>';    echo '</div>';    echo '</div>';//end pricing span    echo '</div>'; //end pricing row}add_shortcode('blackbird-basic-wordpress2', 'bb_basic_wordpress_features2');/* * SAMPLE CODE, NOT USED. USE ONLY AS TEMPLATE */function bb_hosting_menu1() {    //Set up variables    $hostid = 444; //ID of Website Care and Maint Page    //Bronze Plan    $bronzename = get_field('bronze_host_plan_name', $hostid,'');        $bronzecost = get_field('bronze_host_plan_cost', $hostid,'');    $bronzebenes = get_field('bronze_host_plan_benefits', $hostid,'');    //Silver Plan    $silvername = get_field('silver_host_plan_name', $hostid,'');        $silvercost = get_field('silver_host_plan_cost', $hostid,'');    $silverbenes = get_field('silver_host_plan_benefits', $hostid,'');    //Gold Plan    $goldname = get_field('gold_host_plan_name', $hostid,'');        $goldcost = get_field('gold_host_plan_cost', $hostid,'');    $goldbenes = get_field('gold_host_plan_benefits', $hostid,'');            echo '<div class="pricing-row">';    //Cell One    echo '<div class="pricing-span">';//pricing span begin    echo '<div class="pricing-col swatch-normal">';    echo '<h2 class="pricing-head">'.$bronzename.'</h2>';    echo '<p class="pricing-description">As little as</p>';    echo '<h4 class="pricing-price"><small>$</small>'.$bronzecost.'<span>month</span></h4>';    echo $bronzebenes;    echo '<span class="button-services"><a href="#">Sign Up</a></span>';    echo '</div>';    echo '</div>';//end pricing span    //Cell Two    echo '<div class="pricing-span">';//pricing span begin    echo '<div class="pricing-col swatch-featured pricing-featured">';    echo '<h2 class="pricing-head">'.$silvername.'</h2>';    echo '<p class="pricing-description">As little as</p>';    echo '<h4 class="pricing-price"><small>$</small>'.$silvercost.'<span>month</span></h4>';        echo $silverbenes;    echo '<span class="button-services"><a href="#">Sign Up</a></span>';    echo '</div>';    echo '</div>';//end pricing span    //Cell Three    echo '<div class="pricing-span">';//pricing span begin    echo '<div class="pricing-col swatch-normal">';    echo '<h2 class="pricing-head">'.$goldname.'</h2>';    echo '<p class="pricing-description">As little as</p>';    echo '<h4 class="pricing-price"><small>$</small>'.$goldcost.'<span>month</span></h4>';        echo $goldbenes;    echo '<span class="button-services"><a href="#">Sign Up</a></span>';    echo '</div>';    echo '</div>';//end pricing span    echo '</div>'; //end pricing row}add_shortcode('hosting-menu1', 'bb_hosting_menu1');/* * Services Pages Drop-down Menu */function bb_services_dropdown(){    //Enter IDs of service pages here    $wordpress = 9;    $graphic_design = 15;    $email_social = 13;    $seo_sem = 11;    $web_hosting = 444;    $web_maint = 741;  echo '<div class="services-dropdown">';  echo '<button onclick="myFunction()" class="services-dropbtn">Select another service<i class="fa fa-caret-down fa-fw"></i>&nbsp;</button>';  echo '<div id="myDropdown" class="services-dropdown-content">';  echo '<a href="'.esc_url(( get_permalink($wordpress) )).'"><i class="fa fa-wordpress fa-fw"></i>&nbsp;'.get_the_title( $wordpress ).'</a>';  echo '<a href="'.esc_url(( get_permalink($graphic_design) )).'"><i class="fa fa-desktop fa-fw"></i>&nbsp;'.get_the_title( $graphic_design ).'</a>';  echo '<a href="'.esc_url(( get_permalink($email_social) )).'"><i class="fa fa-share-alt fa-fw"></i>&nbsp;'.get_the_title( $email_social ).'</a>';  echo '<a href="'.esc_url(( get_permalink($seo_sem) )).'"><i class="fa fa-keyboard-o fa-fw"></i>&nbsp;'.get_the_title( $seo_sem ).'</a>';  echo '<a href="'.esc_url(( get_permalink($web_hosting) )).'"><i class="fa fa-server fa-fw"></i>&nbsp;'.get_the_title( $web_hosting ).'</a>';  echo '<a href="'.esc_url(( get_permalink($web_maint) )).'"><i class="fa fa-medkit fa-fw"></i>&nbsp;'.get_the_title( $web_maint ).'</a>';  echo '</div>';  echo '</div>';}function bb_services_dropdown2(){    //Enter IDs of service pages here    $wordpress = 9;    $graphic_design = 15;    $email_social = 13;    $seo_sem = 11;    $web_hosting = 444;    $web_maint = 741;  echo '<div class="services-dropdown">';  echo '<button onclick="myFunction()" class="services-dropbtn">Select another service<i class="fa fa-caret-down fa-fw"></i>&nbsp;</button>';  echo '<div id="myDropdown" class="services-dropdown-content">';  echo '<ul class="fa-ul">';  echo '<li><a href="'.esc_url(( get_permalink($wordpress) )).'"><i class="fa-li fa fa-wordpress fa-fw"></i>'.get_the_title( $wordpress ).'</a></li>';  echo '<li><i class="fa-li fa fa-desktop fa-fw"></i><a href="'.esc_url(( get_permalink($graphic_design) )).'">'.get_the_title( $graphic_design ).'</a></li>';  echo '<li><i class="fa-li fa fa-share fa-fw"></i><a href="'.esc_url(( get_permalink($email_social) )).'">'.get_the_title( $email_social ).'</a></li>';  echo '<li><i class="fa-li fa fa-keyboard-o fa-fw"></i><a href="'.esc_url(( get_permalink($seo_sem) )).'">'.get_the_title( $seo_sem ).'</a></li>';  echo '<li><i class="fa-li fa fa-server fa-fw"></i><a href="'.esc_url(( get_permalink($web_hosting) )).'">'.get_the_title( $web_hosting ).'</a></li>';  echo '<li><i class="fa-li fa fa-medkit fa-fw"></i><a href="'.esc_url(( get_permalink($web_maint) )).'">'.get_the_title( $web_maint ).'</a></li>';  echo '</div>';  echo '</div>';}add_shortcode ('services-dropdown','bb_services_dropdown');/* * Project Category Drop-down Menu */function bb_projects_dropdown(){        $projtypes = get_terms( array(    'taxonomy' => 'project_type',    //'hide_empty' => false,) );        //var_dump($projtypes);   echo '<div class="services-dropdown">';  echo '<button onclick="myFunction()" class="services-dropbtn">Select a type of project<i class="fa fa-caret-down fa-fw"></i>&nbsp;</button>';  echo '<div id="myDropdown" class="services-dropdown-content">';      foreach ($projtypes as $projtype):      //var_dump($projtype);        $projtype_link = get_term_link($projtype);                //If there's an error, continue to next term        if (is_wp_error($projtype_link)){            continue;        }                if ($projtype->name == "Copywriting"){            $icon = "fa-keyboard-o";        }                if ($projtype->name == "ECommerce"){            $icon = "fa-shopping-cart";        }                if ($projtype->name == "Email Marketing"){            $icon = "fa-at";        }                if ($projtype->name == "Graphic Design"){            $icon = "fa-desktop";        }                if ($projtype->name == "Logos and Branding"){            $icon = "fa-certificate";        }                if ($projtype->name == "Websites"){            $icon = "fa-code";        }                if ($projtype->name == "Responsive Design"){            $icon = "fa-mobile";        }                if ($projtype->name == "Social Media"){            $icon = "fa-share-alt";        }                if ($projtype->name == "WordPress"){            $icon = "fa-wordpress";        }                //var_dump($icon);      // We successfully got a link. Print it out.    echo '<a href="' . esc_url( $projtype_link ) . '"><i class="fa '. $icon. ' fa-fw"></i>' . $projtype->name . '</a>';  endforeach;    echo '</div>';  echo '</div>';  }add_shortcode ('projects-dropdown','bb_projects_dropdown');/*  *  * Recent Posts Shortcode *  */function bb_recent_posts(){    //global $post;        // args    $args = array (        'post_type' => 'post',            );        // The Query    $bb_query = new WP_Query($args);    echo '<div class="recent-posts-shortcode"><h2>Recent Posts</h2><ul>';            // The Loop    if ($bb_query->have_posts()): while ($bb_query->have_posts()):$bb_query->the_post();        $bb_title = get_the_title();    $bb_link = get_the_permalink();    $bb_recent = '<li><a href="'.$bb_link.'"><p>'.$bb_title.'</p></a></li>';        echo $bb_recent;        endwhile;    wp_reset_postdata();        else:        echo '<p>'._e('Sorry, no posts match your criteria.').'</p>';    endif;        echo '</ul></div>';}add_shortcode ('bb-recent-posts','bb_recent_posts');/*  *  * Related Posts Shortcode * @link https://premium.wpmudev.org/blog/10-awesome-shortcodes-for-your-wordpress-blog/ *  */function related_posts_shortcode($atts) {    extract(shortcode_atts(array(        'limit' => '3',                    ),                    $atts));    global $wpdb, $post, $table_prefix;    if ($post->ID) {        $retval                = '<div class="related-posts-shortcode"><h2><em>Related Posts</em></h2><ul>';// Get tags        $tags                = wp_get_post_tags($post->ID);        $tagsarray                = array();        foreach ($tags as                $tag) {            $tagsarray[]                    = $tag->term_id;        }        $tagslist                = implode(',',                $tagsarray);// Do the query        $q                = "SELECT p.*, count(tr.object_id) as countFROM $wpdb->term_taxonomy AS tt, $wpdb->term_relationships AS tr, $wpdb->posts AS pWHERE tt.taxonomy ='post_tag'AND tt.term_taxonomy_id = tr.term_taxonomy_idAND tr.object_id = p.IDAND tt.term_id IN ($tagslist)AND p.ID != $post->IDAND p.post_status = 'publish'AND p.post_date_gmt < NOW()GROUP BY tr.object_idORDER BY count DESC, p.post_date_gmt DESCLIMIT $limit;";        $related                = $wpdb->get_results($q);                        if ($related) {            foreach ($related as                    $r) {                                                $bb_related_meta = get_post_meta(get_the_ID($r));                $bb_related_thumb = get_the_post_thumbnail($r->ID,'related-posts', array('class'=>'aligncenter'));                                                                $retval .= '<li><a itemprop="relatedLink" title="' . wptexturize($r->post_title) . '" href="' . get_permalink($r->ID) . '">'.$bb_related_thumb. wptexturize($r->post_title) . '</a></li>';                            }        } else {            $retval .= '<li>No related posts found</li>';        }        $retval .= '</ul></div>';        return $retval;    }    return;}add_shortcode('related_posts',        'related_posts_shortcode');/*  *  * JetPack Sharing Display Shortcode * @link https://jetpack.com/2013/06/10/moving-sharing-icons/ *  */